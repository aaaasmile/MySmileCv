<p id="notice"><%= notice %></p>

<h3>Identities</h3>

<table>
  <thead>
    <tr>
      <%  col_count = 0
      max_col_acapo = 6
      title_rest = []
      for column in Identity.content_columns
        colonna_nome =  column.human_name
        colonna_nome = 'Lang' if column.human_name == 'Klang'
        if col_count >= max_col_acapo
          title_rest << colonna_nome
        else
          col_count += 1
      %>
      <th><%= colonna_nome %></th>
        <% end %>
      <% end %>
    </tr>
    <tr>
      <% title_rest.each do |colonna_nome| %>
        <th><%= colonna_nome %></th>
      <%end %>
    </tr>
  </thead>

  <tbody>
    <% row_odd = false 
      @identities.each do |identity| 
        class_name = row_odd == true ? 'list_line_odd' : 'list_line_even' 
        row_odd = !row_odd %>
    <tr class="<%= class_name %>">
      <% col_count = 0
      for column in Identity.content_columns
        contenuto_campo = ""
        if column.name == 'klang' && identity.language
          contenuto_campo = h identity.language.isoname
        else
          contenuto_campo = h identity.send(column.name)
        end
        if col_count >= max_col_acapo
          col_count = 0 %>
    </tr>
    
    <tr class="<%= class_name %>">
      <% else
          col_count += 1
        end %>
      <td><%= contenuto_campo %></td>
      <%end %>

      <td>
        <div class="btn-group" role="group" aria-label="Commands">
          <%= link_to(identity, class: 'btn btn-default', aria:{label: 'Show'} ) do %>
            <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
          <% end %>
          <%= link_to(edit_identity_path(identity), class: 'btn btn-default', aria:{label: 'Edit'} ) do %>
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
          <% end %>
          <%= link_to(identity, method: :delete, class: 'btn btn-default', title: 'Delete question',  aria:{label: 'Delete'}, data: { confirm: 'Are you sure?'}) do %>
            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
          <% end %>
          <%= link_to({:controller => 'curriculum', :action => 'curr_set_identity', :id => identity}, class: 'btn btn-primary', aria:{label: 'Use'}) do %>
             Use
          <% end %>
        </div>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to(new_identity_path, class: 'btn btn-default', aria:{label: 'Add'}) do %>
  <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
<% end %>
