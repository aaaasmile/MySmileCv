<p id="notice"><%= notice %></p>

<h3>Listing Identities</h3>
<a class="btn btn-default" >
  <span class="glyphicon glyphicon-align-left" aria-hidden="true"></span>
</a>
<table>
  <thead>
    <tr>
      <%  col_count = 0
      max_col_acapo = 6
      title_rest = []
      for column in Identity.content_columns
        colonna_nome =  column.human_name
        colonna_nome = 'Lang' if column.human_name == 'Klang'
        if col_count >= max_col_acapo
          title_rest << colonna_nome
        else
          col_count += 1
      %>
      <th><%= colonna_nome %></th>
        <% end %>
      <% end %>
    </tr>
    <tr>
      <% title_rest.each do |colonna_nome| %>
        <th><%= colonna_nome %></th>
      <%end %>
    </tr>
  </thead>

  <tbody>
    <% row_odd = false 
      @identities.each do |identity| 
        class_name = row_odd == true ? 'list_line_odd' : 'list_line_even' 
        row_odd = !row_odd %>
    <tr class="<%= class_name %>">
      <% col_count = 0
      for column in Identity.content_columns
        contenuto_campo = ""
        if column.name == 'klang' && identity.language
          contenuto_campo = h identity.language.isoname
        else
          contenuto_campo = h identity.send(column.name)
        end
        if col_count >= max_col_acapo
          col_count = 0 %>
    </tr>
    
    <tr class="<%= class_name %>">
      <% else
          col_count += 1
        end %>
      <td><%= contenuto_campo %></td>
      <%end %>

      <td>
        <%= link_to(identity, class: 'btn btn-default', aria:{label: 'Show'} ) do %>
          <span class="glyphicon glyphicon-file" aria-hidden="true"></span>
        <% end %>
        <%= link_to 'Edit', edit_identity_path(identity) %>
        <%= link_to 'Destroy', identity, method: :delete, data: { confirm: 'Are you sure?' } %>
        <%= link_to 'In Curriculum', :controller => 'curriculum', :action => 'curr_set_identity', :id => identity %>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Identity', new_identity_path %>
